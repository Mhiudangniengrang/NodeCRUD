<%- include('layout/header') %>

<div class="container my-4">
  <% if (message) { %>
  <div class="alert alert-dismissible fade show alert bg-success" role="alert">
    <button
      class="btn-close"
      type="button"
      data-bs-dismiss="alert"
      aria-label="Close"
    ></button>
    <strong><%= message.message %></strong>
  </div>
  <% } %>
  <div class="table-responsive">
    <% if(users != ''){ %>
    <table class="table my-3">
      <thead class="thead-dark">
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Image</th>
          <th scope="col">Name</th>
          <th scope="col">Email</th>
          <th scope="col">Phone</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        <% users.forEach((row,index) =>{ %>
        <tr>
          <td><%= index %></td>
          <td>
            <img
              class="rounded-circle"
              src="<%= row.image %>"
              alt="User Image"
              style="width: 40px; height: 40px"
            />
          </td>
          <td><%= row.name %></td>
          <td><%= row.email %></td>
          <td><%= row.phone %></td>
          <td>
            <a href="/detail/<%= row._id%>" class="text-info mx-1">
              <i class="fa-solid fa-circle-info"></i></i>
            </a>
            <a href="/edit/<%= row._id%>" class="text-success mx-1">
              <i class="fas fa-edit"></i>
            </a>
            <a href="/delete/<%=row._id %>" class="text-danger mx-1">
              <i class="fas fa-trash-alt"></i>
            </a>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
    <% } else { %>
    <h1 class="text-center text-secondary mt-5">
      No users found in the database !!!
    </h1>
    <% } %>
  </div>
</div>

<%- include ('layout/footer') %>
